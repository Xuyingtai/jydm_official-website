# 部署检查清单

## ✅ 部署前检查

### 1. 代码检查
- [ ] 所有功能测试通过
- [ ] 图片路径正确（使用 `/images/` 开头的绝对路径）
- [ ] 视频链接正确配置
- [ ] 没有控制台错误

### 2. 构建准备
- [ ] 运行 `npm install` 确保依赖完整
- [ ] 运行 `npm run build` 构建成功
- [ ] 检查 `dist` 文件夹已生成
- [ ] 运行 `npm run preview` 本地预览正常

### 3. 服务器准备
- [ ] 服务器已安装 Nginx 或 Apache
- [ ] 服务器防火墙已开放 80 和 443 端口
- [ ] 服务器有足够的磁盘空间
- [ ] 已获取服务器IP地址

---

## ✅ 域名解绑步骤

### 步骤1：登录域名管理平台
- [ ] 登录域名注册商（如：阿里云、腾讯云、GoDaddy）
- [ ] 进入域名管理页面

### 步骤2：删除旧DNS解析
- [ ] 找到DNS解析设置
- [ ] 删除或暂停指向旧服务器的A记录
- [ ] 删除或暂停CNAME记录（如果有）
- [ ] 记录旧解析信息（备用）

### 步骤3：等待DNS生效
- [ ] 使用 https://dnschecker.org/ 检查DNS状态
- [ ] 等待10分钟到48小时
- [ ] 确认旧网站已无法访问

---

## ✅ 服务器部署步骤

### 步骤1：上传文件
- [ ] 将 `dist` 文件夹内容上传到服务器
- [ ] 上传路径：`/var/www/html/`（或自定义路径）
- [ ] 检查文件权限：`chmod -R 755 /var/www/html`

### 步骤2：配置Web服务器

**Nginx配置：**
- [ ] 创建配置文件 `/etc/nginx/sites-available/jydm`
- [ ] 添加server配置块
- [ ] 配置 `try_files` 支持React Router
- [ ] 测试配置：`nginx -t`
- [ ] 启用站点并重启Nginx

**Apache配置：**
- [ ] 启用rewrite模块：`a2enmod rewrite`
- [ ] 编辑虚拟主机配置
- [ ] 添加Rewrite规则支持React Router
- [ ] 重启Apache

### 步骤3：配置域名解析
- [ ] 添加A记录：`@` → 服务器IP
- [ ] 添加A记录：`www` → 服务器IP
- [ ] 设置TTL为600（10分钟）
- [ ] 等待DNS生效

---

## ✅ 部署后验证

### 功能测试
- [ ] 首页正常显示
- [ ] 导航菜单正常工作
- [ ] 所有页面路由正常（无404）
- [ ] 视频播放功能正常
- [ ] 图片正常加载
- [ ] 移动端显示正常

### 性能检查
- [ ] 页面加载速度正常
- [ ] 静态资源加载正常
- [ ] 无控制台错误

### SSL证书（可选但推荐）
- [ ] 安装Certbot
- [ ] 申请Let's Encrypt证书
- [ ] 配置自动续期
- [ ] 测试HTTPS访问

---

## ✅ 常见问题快速解决

| 问题 | 可能原因 | 解决方法 |
|------|---------|---------|
| 404错误 | React Router未配置 | 检查 `try_files` 或 `RewriteRule` |
| 图片不显示 | 路径错误 | 检查图片路径是否为 `/images/...` |
| 域名无法访问 | DNS未生效 | 等待或检查DNS解析 |
| 样式错乱 | 资源路径错误 | 检查 `vite.config.ts` 中的 `base` 配置 |

---

## 📞 需要帮助？

如果遇到问题，请检查：
1. 服务器错误日志
2. 浏览器控制台
3. DNS解析状态
4. 防火墙设置

---

**部署完成后，记得备份网站文件！**

